<%- include("./../partials/header.ejs") %>

<body class="admin-dashboard-body">
    <div class="admin-dashboard-container">
        <h2 class="admin-dashboard-title">All Users</h2>
        <table class="admin-user-table">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Storage Usage (MB)</th>
                    <th>Verified</th>
                    <th>Created At</th>
                    <th>Last Activity</th>
                    <th>Actions</th>
                    <th>Send Marketing Email</th>
                </tr>
            </thead>
            <tbody>
                <% users.forEach(user => { %>
                    <tr>
                        <td><%= user.name %></td>
                        <td><%= user.email %></td>
                        <td class="<%= user.status === 'active' ? 'status-active' : 'status-inactive' %>"><%= user.status %></td>
                        <td><%= (user.storageUsage / (1024 * 1024)).toFixed(2) %> MB</td>
                        <td><%= user.is_verified ? 'Yes' : 'No' %></td>
                        <td><%= new Date(user.created_at).toLocaleDateString() %></td>
                        <td><%= new Date(user.last_activity).toLocaleString() %></td>
                        <td>
                            <form action="/move_out/admin/activate-deactivate/<%= user.user_id %>" method="POST">
                                <button type="submit" class="admin-action-btn"><%= user.status === 'active' ? 'Deactivate' : 'Activate' %></button>
                            </form>
                        </td>
                        <td>
                            <a href="/move_out/admin/send-marketing-email" class="admin-button">Send Email</a>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>

<%- include("./../partials/footer.ejs") %>
</body>
